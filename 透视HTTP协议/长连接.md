长连接用的是成本均摊的思路，因为短链接没握手建立连接，只传输一次数据就挥手断开连接，这样频繁建连和断链非常耗时，长连接使用一次连接传输多次数据，再断开连接的思路，提高传输效率。

HTTP/1.1默认使用长连接，也可以通过Connection字段将值设置为keep-alive来明确要求使用长连接。不管客户端是否使用长连接，如果服务器支持长连接，响应报文都会将“Connection: keep-alive”添加到报文中。



维护大量空闲的长连接非常耗费系统资源，如果客户端在不需要服务器继续保持长连接状态时，可以在请求报文中添加Connection-close，表示这次通信之后关闭长连接。



也可以设置服务器主动断开连接，通过设置超时时间和一个连接上最大处理请求的数量等。